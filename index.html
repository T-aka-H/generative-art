<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Generative Art</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      background: #000;
      color: #fff;
      width: 100%; height: 100%;
      font-family: Georgia, 'Times New Roman', serif;
      overflow-x: hidden;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    header {
      padding: 80px 0 60px;
      text-align: center;
    }
    header h1 {
      font-size: 14px;
      font-weight: 400;
      letter-spacing: 10px;
      text-transform: uppercase;
      color: rgba(255,255,255,0.35);
    }
    .gallery {
      display: flex;
      flex-direction: column;
      gap: 60px;
      padding: 0 24px 80px;
      max-width: 800px;
      width: 100%;
    }
    .work {
      display: block;
      text-decoration: none;
      color: inherit;
      position: relative;
      border: 1px solid rgba(255,255,255,0.08);
      transition: border-color 0.5s ease;
    }
    .work:hover {
      border-color: rgba(255,255,255,0.25);
    }
    .work-preview {
      width: 100%;
      aspect-ratio: 16 / 9;
      overflow: hidden;
      position: relative;
      background: #080808;
    }
    .work-preview canvas {
      width: 100%; height: 100%;
      display: block;
    }
    .work-info {
      padding: 24px 28px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }
    .work-title {
      font-size: 20px;
      letter-spacing: 8px;
      text-transform: uppercase;
      color: rgba(255,255,255,0.8);
      transition: color 0.3s;
    }
    .work:hover .work-title { color: #fff; }
    .work-sub {
      font-size: 12px;
      letter-spacing: 3px;
      color: rgba(255,255,255,0.25);
      font-family: -apple-system, sans-serif;
    }
    footer {
      padding: 40px 0;
      text-align: center;
      color: rgba(255,255,255,0.15);
      font-size: 11px;
      letter-spacing: 3px;
      font-family: -apple-system, sans-serif;
    }
    @media (max-width: 600px) {
      header { padding: 50px 0 40px; }
      header h1 { font-size: 12px; letter-spacing: 8px; }
      .gallery { gap: 40px; padding: 0 16px 60px; }
      .work-info { padding: 18px 20px; }
      .work-title { font-size: 16px; letter-spacing: 6px; }
      .work-sub { font-size: 10px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Generative Art</h1>
  </header>
  <div class="gallery">
    <a href="./waves/" class="work">
      <div class="work-preview">
        <canvas id="cvWaves"></canvas>
      </div>
      <div class="work-info">
        <span class="work-title">Waves</span>
        <span class="work-sub">Interactive Ocean</span>
      </div>
    </a>
    <a href="./aurora/" class="work">
      <div class="work-preview">
        <canvas id="cvAurora"></canvas>
      </div>
      <div class="work-info">
        <span class="work-title">Aurora</span>
        <span class="work-sub">Mosaic of Light</span>
      </div>
    </a>
  </div>
  <footer>tap a work to enter</footer>

  <script>
  // ミニプレビュー: 各作品の雰囲気をcanvasで描画
  (function() {
    // Smooth value noise with interpolation (shared by both previews)
    function hash2(ix, iy) {
      var n = Math.sin(ix * 127.1 + iy * 311.7) * 43758.5453;
      return n - Math.floor(n);
    }
    function vnoise(x, y) {
      var ix = Math.floor(x), iy = Math.floor(y);
      var fx = x - ix, fy = y - iy;
      fx = fx * fx * (3 - 2 * fx);
      fy = fy * fy * (3 - 2 * fy);
      var a = hash2(ix, iy), b = hash2(ix+1, iy);
      var c = hash2(ix, iy+1), d = hash2(ix+1, iy+1);
      return a + (b-a)*fx + (c-a)*fy + (a-b-c+d)*fx*fy;
    }
    function vnoise3(x, y, z) {
      var iz = Math.floor(z), fz = z - iz;
      fz = fz * fz * (3 - 2 * fz);
      return vnoise(x + iz * 17.3, y + iz * 31.7) * (1 - fz)
           + vnoise(x + (iz+1) * 17.3, y + (iz+1) * 31.7) * fz;
    }

    // --- Waves プレビュー (ドットグリッド海洋スタイル) ---
    var cw = document.getElementById('cvWaves');
    var ctxW = cw.getContext('2d');
    var W = cw.width = 400;
    var H = cw.height = 225;
    var tW = 0;
    var dotW = 4;
    var colsW = Math.ceil(W / dotW);
    var rowsW = Math.ceil(H / dotW);
    var oceanHues = [195, 200, 210, 185, 205, 180, 215, 190];

    function drawWaves() {
      for (var r = 0; r < rowsW; r++) {
        for (var c = 0; c < colsW; c++) {
          var gx = c * dotW;
          var gy = r * dotW;
          var depthR = gy / H;
          // Domain warping: horizontal emphasis
          var warpX = vnoise3(gx * 0.008, gy * 0.006, tW * 0.5) * 60 - 30;
          var warpY = vnoise3(gx * 0.008 + 5, gy * 0.006 + 5, tW * 0.35) * 30 - 15;
          // Wave surge
          warpX += Math.sin(gy * 0.02 + tW * 2.5 + gx * 0.003) * 10;
          var wx = gx + warpX;
          var wy = gy + warpY;
          // Palette interpolation
          var ciRaw = vnoise3(wx * 0.006, wy * 0.006, tW * 0.4) * 8;
          var ci0 = Math.floor(ciRaw) % 8;
          var ci1 = (ci0 + 1) % 8;
          var frac = ciRaw - Math.floor(ciRaw);
          var baseH = oceanHues[ci0] + (oceanHues[ci1] - oceanHues[ci0]) * frac;
          var hueShift = vnoise3(wx * 0.005 + 10, wy * 0.008 + 10, tW * 0.3) * 40 - 20;
          var h = ((baseH + hueShift + depthR * 15) % 360 + 360) % 360;
          var briN = vnoise3(wx * 0.006 + 20, wy * 0.008 + 20, tW * 0.4);
          var s = 40 + briN * 30 + depthR * 10;
          var l = (18 + briN * 22) * (1.15 - depthR * 0.5);
          // Foam at wave peaks
          if (warpY < -8 && briN > 0.55 && depthR < 0.5) {
            var foam = (briN - 0.55) * 4;
            s *= (1 - foam * 0.5);
            l += foam * 12;
          }
          ctxW.fillStyle = 'hsl(' + h + ',' + s + '%,' + l + '%)';
          ctxW.fillRect(gx, gy, dotW, dotW);
        }
      }
      tW += 0.008;
      requestAnimationFrame(drawWaves);
    }
    drawWaves();

    // --- Aurora プレビュー ---
    var ca = document.getElementById('cvAurora');
    var ctxA = ca.getContext('2d');
    var AW = ca.width = 400;
    var AH = ca.height = 225;
    var tA = 0;
    var dotA = 4;
    var colsA = Math.ceil(AW / dotA);
    var rowsA = Math.ceil(AH / dotA);

    var auroraHues = [240, 270, 310, 200, 160, 120, 280, 350];

    function drawAurora() {
      for (var r = 0; r < rowsA; r++) {
        for (var c = 0; c < colsA; c++) {
          var gx = c * dotA;
          var gy = r * dotA;
          // Domain warping
          var warpX = vnoise3(gx * 0.008, gy * 0.008, tA * 0.4) * 60 - 30;
          var warpY = vnoise3(gx * 0.008 + 5, gy * 0.008 + 5, tA * 0.4) * 60 - 30;
          var wx = gx + warpX;
          var wy = gy + warpY;
          // Palette selection with smooth interpolation
          var ciRaw = vnoise3(wx * 0.005, wy * 0.005, tA * 0.5) * 8;
          var ci0 = Math.floor(ciRaw) % 8;
          var ci1 = (ci0 + 1) % 8;
          var frac = ciRaw - Math.floor(ciRaw);
          var baseH = auroraHues[ci0] + (auroraHues[ci1] - auroraHues[ci0]) * frac;
          var hueShift = vnoise3(wx * 0.004 + 10, wy * 0.01 + 10, tA * 0.3) * 60 - 30;
          var h = ((baseH + hueShift) % 360 + 360) % 360;
          var briN = vnoise3(wx * 0.005 + 20, wy * 0.01 + 20, tA * 0.4);
          var s = 45 + briN * 30;
          var l = 12 + briN * 28;
          ctxA.fillStyle = 'hsl(' + h + ',' + s + '%,' + l + '%)';
          ctxA.fillRect(gx, gy, dotA, dotA);
        }
      }
      tA += 0.008;
      requestAnimationFrame(drawAurora);
    }
    drawAurora();
  })();
  </script>
</body>
</html>
