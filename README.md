# Gen-Art

**インタラクティブ・ジェネレーティブアート・コレクション**

p5.js と Canvas 2D API で描かれた 7 つのジェネレーティブアート作品集。すべての作品はリアルタイムに生成され、時刻・デバイスセンサー・タッチ操作によって常に変化します。画像素材は一切使用せず、数式とアルゴリズムだけで映像と音を生み出しています。

**Live Demo:** https://t-aka-h.github.io/generative-art/

---

## 作品一覧

| 作品 | サブタイトル | 核心技術 |
|------|------------|----------|
| [Waves](#waves) | Interactive Ocean | Perlin ノイズ × sin 波の 120 層合成 |
| [Aurora](#aurora) | Mosaic of Light | ドメインワーピングによるモザイク |
| [Meadow](#meadow) | Breeze and Light | 深度グラデーション付きドメインワーピング |
| [Clouds](#clouds) | Drifting Forms | 密度場のスムースステップ閾値処理 |
| [Snow](#snow) | Falling Light | 3 層パーティクルシステム × ボケテクスチャ |
| [Neon1](#neon1) | Skating Light | 曲率ベースの軌道物理 × ダブルバッファ残像 |
| [Neon2](#neon2) | Triangle Light | 三角形軌道物理 × 全描画要素の三角形化 |

---

## 共通の設計思想

### 「触れるアート」

すべての作品は **観る人が同時に参加者になる** というコンセプトで作られています。操作しなくても自律的に変化し続けますが、指先やデバイスの動きでその流れに介入できます。同じ風景は二度と現れません。

### 時刻連動

各作品は 12 のカラーテーマを持ち、現実の時刻に連動して 2 時間ごとに滑らかに遷移します。スムースステップ補間 `t² (3 - 2t)` により、テーマの切り替わりが知覚できないほど自然に行われます。

### 音の生成

すべての環境音は Web Audio API でリアルタイムに合成されます。ホワイトノイズ・ピンクノイズ・ブラウンノイズをバンドパス/ローパスフィルタに通し、各作品の世界観に合った持続音を生成しています。録音素材は一切使用していません。

---

## Waves

**インタラクティブ・ジェネレーティブ・オーシャン**

### 数学的背景

120 層の波が重なり、各層は **Perlin ノイズ** と **sin 波** の合成で形成されています。

**sin 波** は自然界の規則的な繰り返し運動を表す最も基本的な関数です。しかし sin 波だけでは波はプールのように均一になります。そこに **Perlin ノイズ**（1983 年、ケン・パーリンが映画『トロン』のために発明）を重ねることで、「規則的でも不規則でもない」自然のゆらぎを再現しています。

3 層の Perlin ノイズが異なるスケールで波の形状を乱し、波頭には泡（foam）と飛沫（spray）がノイズベースで配置されます。波面の曲率が閾値を超えた地点に白波が現れる仕組みです。

**Catmull-Rom スプライン** で波の曲線を滑らかに補間し、120 層の前後関係は y 座標でソートして海の奥行きを表現します。

### アート性

現実の時刻が空と海の色に反映され（朝焼けの紫、昼の白光、夕暮れの赤橙、夜の深紺）、緯度に応じて海の色味が変化します（赤道付近はターコイズ、高緯度は暗い紺）。コンパスの向きで波の流れる方向が変わり、物理的な身体の向きがデジタルの海に反映されます。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス左右移動 | 波の流れる方向と速度 |
| マウス上下移動 | 波の穏やかさ / 荒さ |
| クリック（海面） | 波紋が広がる |
| クリック（空） | 時間帯を 2 時間進める |
| ダブルクリック（空） | 実時刻に戻す |
| スワイプ | 突風が波を押す |
| 長押し | 水面を押し込む |
| ピンチ（広げる） | 波が荒くなる |
| ピンチ（つまむ） | 波が穏やかになる |
| 端末を振る | 大きな波が発生 |
| 端末の傾き | 波の振幅と流れ |

### サウンド

ホワイトノイズ → ローパスフィルタ（波の音）

---

## Aurora

**インタラクティブ・ジェネレーティブ・オーロラ**

### 数学的背景

**ドメインワーピング（Domain Warping）** がこの作品の核心です。通常の Perlin ノイズは雲のような模様を生みますが、ドメインワーピングは「ノイズの入力座標をノイズで歪ませる」再帰的手法です。各ドットの色を決める前に、そのドットの仮想座標をノイズで大きくずらすことで、色の境界がうねり、折り重なり、カーテンのように波打ちます。

8 色のカラーパレットから滑らかに補間して色を選び、さらに 3 層の色相ゆらぎ（大域±50、中域±30、超低周波±20）を重ねることで、8 色からは想像できないほど豊かなグラデーションが現れます。600 個の星が Perlin ノイズで明滅し、時刻テーマの色に微かに染まります。

### アート性

デジタルのピクセルそのものを造形表現として用いるコンセプトです。画面を埋め尽くすドットのひとつひとつが独立した色を持ち、集合体としてオーロラのカーテンを形成します。ドットの粒感とオーロラの滑らかさの共存が、デジタルでしか生まれない美しさを生み出しています。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス移動 | 色模様の流れる方向 |
| クリック | 色の波紋が広がる |
| クリック（上端） | 時間帯を 2 時間進める |
| ダブルクリック（上端） | 実時刻に戻す |
| スワイプ | 色模様に突風 |
| 長押し | 押した場所に色が集中 |
| ピンチ | ノイズのスケールを変える |
| 端末を振る | 全体が明るく光る |
| 端末の傾き | 色模様の流れる方向 |

### サウンド

ピンクノイズ → バンドパス 600Hz（風の音） + ブラウンノイズ → ローパス 200Hz（低いドリフト音）

---

## Meadow

**インタラクティブ・ジェネレーティブ・草原**

### 数学的背景

Aurora と同じドメインワーピング技法をベースに、**深度グラデーション** を加えた作品です。y 座標の比率で明度と彩度を段階的に変化させ、手前ほど明るく鮮やかに、奥ほど暗く沈んだ色調にすることで、平面のピクセル配列に遠近感を与えています。

3 層の **風波（wind wave）** が sin 波として画面を横断します。各層は異なる周波数（0.003, 0.005, 0.001）と振幅を持ち、風に揺れる草原の印象を生みます。ドメインワーピングの歪み量にも風波が影響し、風が吹くとパターン全体がうねります。

**光斑（木漏れ日）** は Perlin ノイズで位置と大きさが決まる移動する明るいパッチで、草原に差し込む光を表現しています。

### アート性

草原の色相は 8 色パレット（グリーン系 128°〜172°）から補間され、3 層の色相ゆらぎで微妙な色の変化が生まれます。深度グラデーションにより、ピクセルアートでありながら空間の奥行きを感じさせる独特の美しさがあります。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス移動 | 草の流れる方向 |
| クリック | 波紋が広がる |
| クリック（上端） | 時間帯を 2 時間進める |
| ダブルクリック（上端） | 実時刻に戻す |
| スワイプ | 突風で草が揺れる |
| 長押し | 草を踏みつぶす（暗くなる） |
| ピンチ | 光斑のスケールを変える |
| 端末を振る | 全体が明るく光る |
| 端末の傾き | 草の流れる方向 |

### サウンド

ピンクノイズ → バンドパス 600Hz（草のさざめき） + ブラウンノイズ → ローパス 200Hz（深い風の音）

---

## Clouds

**インタラクティブ・ジェネレーティブ・雲**

### 数学的背景

3 層の Perlin ノイズで **密度場（density field）** を構築し、**スムースステップ閾値処理** で雲のエッジを決定します。

```
density = smoothstep(threshold, 1.0, noise1 + noise2 * 0.5 + noise3 * 0.25)
```

この処理により、ノイズの値が閾値以下の領域は完全な晴天、閾値以上の領域は雲として描画されます。スムースステップ関数 `t² (3 - 2t)` がエッジを柔らかくぼかし、写実的な雲の境界を生みます。密度が 0.7 を超える領域では彩度を下げ明度を上げることで、雲の芯の白さを表現しています。

大振幅のドメインワーピング（±300）で雲の形状を大きく歪ませ、ゆっくりと形を変えながら漂う巨大な雲を生成します。

### アート性

晴天の青空から密集した積乱雲まで、密度場の閾値ひとつで雲の量が連続的に変化します。ユーザーのピンチ操作でこの閾値を動的に変えられるため、雲を増やしたり減らしたりする神の視点の体験ができます。長押しでは渦巻き効果が発生し、雲を巻き込むように変形させます。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス移動 | 雲を押しのける |
| クリック | 雲を散らす波紋 |
| クリック（上端） | 時間帯を 2 時間進める |
| ダブルクリック（上端） | 実時刻に戻す |
| スワイプ | 突風で雲が流れる |
| 長押し | 渦巻きを発生させる |
| ピンチ（つまむ） | 雲が減る |
| ピンチ（広げる） | 雲が増える |
| 端末を振る | 全体が明るく光る |
| 端末の傾き | 雲の流れる方向 |

### サウンド

ピンクノイズ → バンドパス 300Hz（澄んだ風） + ブラウンノイズ → ローパス 180Hz（大気の低音）

---

## Snow

**インタラクティブ・ジェネレーティブ・雪景色**

### 数学的背景

**3 層パーティクルシステム** で雪を表現しています。遠景（far）・中景（mid）・近景（near）の各層で粒子サイズ・速度・透明度を変え、被写界深度のような空間感を作ります。

各粒子は **ボケテクスチャ** でレンダリングされます。放射状のアルファグラデーション（中心が明るく外側が消える円）を `createGraphics` で事前生成し、`tint()` で色付けして描画します。これにより、カメラのレンズを通して見た雪のような、ふわりとした光の粒が生まれます。

粒子の水平方向のドリフトは `sin(t * driftSpeed + phase)` で表現され、ゆらゆらと揺れながら落下します。サイズも Perlin ノイズで 0.7〜1.4 倍に脈動し、呼吸するように明滅します。

**吹雪のゆらぎ（flurry）** は 3 つの Perlin ノイズ源（低周波・中周波 + サージ閾値）で制御され、自然な強弱の波が生まれます。

### アート性

ボケテクスチャによる柔らかな光の粒が、暗い背景の中でゆっくりと舞い落ちます。長押しすると雪が溶け、色相が暖色（オレンジ系）にシフトし、周囲に暖かいオーラが灯ります。凍てつく雪と溶ける温もりの対比が、触覚的な体験を生み出しています。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス移動 | 風の方向 |
| クリック | 雪が放射状に飛び散る |
| クリック（上端） | 時間帯を 2 時間進める |
| ダブルクリック（上端） | 実時刻に戻す |
| スワイプ | 突風で雪が流れる |
| 長押し | 雪が溶ける（暖色に変化） |
| ピンチ | 降雪量を変える |
| 端末を振る | 落下速度が増す |
| 端末の傾き | 風の方向 |

### サウンド

ピンクノイズ → ハイパス 800Hz → バンドパス 2000Hz（冬の冷たい風） + ブラウンノイズ → ローパス 150Hz（静寂の低音）

---

## Neon1

**インタラクティブ・ネオン・フィギュアスケーター**

### 数学的背景

22 体のスケーターが **曲率ベースの軌道物理** で画面を滑走します。

各スケーターの運動は以下の要素で構成されます:

1. **Perlin ノイズによる曲率**: `noise(seed, t)` で曲率を時間変化させ、滑らかなカーブを描きます
2. **突発的な旋回**: ノイズ値が閾値（0.75）を超えると急旋回が発生し、フィギュアスケートのスピンのような動きになります
3. **回避**: 他のスケーターとの距離が 60px 以下になると逆方向に緩やかにステアリング
4. **衝突**: 距離 24px 以下で衝突判定、反発角度にランダム揺らぎ±0.4rad を加算
5. **エッジ補正**: 画面端 85%以上で中心方向へ漸進的にステアリング

残像（トレイル）は **ダブルバッファ方式** で実現しています。2 枚のオフスクリーンキャンバス（trailPgA / trailPgB）を交互に使用し、`destination-out` コンポジットで少しずつフェードアウトさせます。8 ビットキャンバスの量子化誤差（alpha=1 が永遠に残る問題）を回避するため、フェード処理を毎フレームではなく 29 フレームごとに適用し、約 20 秒で完全に消失するようにしています。

衝突時に primary（赤系）と secondary（青系）のスケーターが出会うと、50% の確率で golden（金色）の子スケーターが誕生します。子スケーターは 10 回衝突すると primary か secondary に成長します。

### アート性

加算合成（`lighter` ブレンドモード）によるネオンの光の軌跡が、暗い背景に重なり合います。複数のスケーターの軌跡が交差し、光が加算されて白く輝く瞬間は、フィギュアスケートの群舞のような美しさがあります。衝突で生まれるスパークは出会いの瞬間を祝福する花火のようです。

### 操作方法

| 操作 | 効果 |
|------|------|
| マウス移動 | スケーターを引き寄せる（3 秒で減衰） |
| クリック | 波紋 + 時間帯を 2 時間進める |
| ダブルクリック | 実時刻に戻す |
| スワイプ | 突風でスケーターが流れる |
| 長押し | 渦巻き（スケーターが旋回する） |
| ピンチ | スケーターの頭部サイズを変える |
| 端末を振る | 全体が明るく光る |
| 端末の傾き | スケーターの流れる方向 |

### サウンド

ホワイトノイズ → バンドパス 120Hz, Q=8（電子的な低い唸り） + ブラウンノイズ → ローパス 80Hz（深いドローン音）

---

## Neon2

**インタラクティブ・ネオン・三角形ジオメトリ**

### 数学的背景

Neon1 の物理エンジンをベースに、**すべての描画要素を三角形のみ** で構成し、さらに **軌道そのものも三角形的** にした作品です。

#### 三角形軌道物理

スケーターは直進セグメント（50〜150px）と急旋回（約 120°）を繰り返し、三角形の経路を描きます:

```
直進(50-150px) → 120°ターン(±20°揺らぎ) → 直進 → 120°ターン → ...
```

ターン角度は `2π/3 ≈ 120°` を基準に ±0.35rad（約±20°）の Perlin ノイズ揺らぎを加え、完全な正三角形にならない有機的な軌跡を生みます。ターン中はスピードが 50% に減速し、旋回の鋭さが強調されます。

#### 三角形レンダリング

| 要素 | 描画 |
|------|------|
| スケーター頭部 | 5 層の同心正三角形（進行方向に頂点） |
| 軌跡（トレイル） | ウェイク三角形（前フレーム位置を尾、現在位置の両翼を底辺） |
| 衝突スパーク | 回転する三角形パーティクル（angle + spin） |
| 波紋（リップル） | 拡大＋回転する三角形リング |
| 長押しオーラ | 螺旋状にオフセットした同心回転三角形 |

正三角形は中心座標 `(cx, cy)`、外接円半径 `r`、回転角 `angle` の 3 パラメータで完全に定義されます:

```
頂点k: (cx + r·cos(angle + k·2π/3), cy + r·sin(angle + k·2π/3))  k = 0, 1, 2
```

#### 衝突時の色変化

衝突のたびに両スケーターがランダムなネオンカラーに変化します。HSV 色空間で Hue=0°〜360°（全色相）、Saturation=0.8〜1.0（高彩度）、Value=1.0（最大明度）から生成し、RGB に変換しています。3 色に限定されない無限の色彩バリエーションが衝突のたびに生まれます。

### アート性

円と曲線の Neon1 に対し、Neon2 は直線と角度だけで世界を構築しています。同じ物理エンジンでも、描画プリミティブを変えるだけで全く異なる印象が生まれる — 曲線の優雅さ vs 直線の鋭さ。ウェイク三角形の軌跡は、戦闘機の航跡のような鋭い美しさを持ち、衝突ごとに変化する色は万華鏡のような予測不能の色彩を生みます。残像は約 60 秒残り、三角形の細い線が長く尾を引きます。

### 操作方法

Neon1 と同一の操作体系です。

| 操作 | 効果 |
|------|------|
| マウス移動 | スケーターを引き寄せる（3 秒で減衰） |
| クリック | 波紋 + 時間帯を 2 時間進める |
| ダブルクリック | 実時刻に戻す |
| スワイプ | 突風でスケーターが流れる |
| 長押し | 渦巻き（スケーターが旋回する） |
| ピンチ | スケーターの頭部サイズを変える |
| 端末を振る | 全体が明るく光る |
| 端末の傾き | スケーターの流れる方向 |

### サウンド

ホワイトノイズ → バンドパス 120Hz, Q=8（電子的な低い唸り） + ブラウンノイズ → ローパス 80Hz（深いドローン音）

---

## ナビゲーション

### デスクトップ

左クリック＋右クリック同時押しで作品間ナビゲーションが開きます。

### スマートフォン

画面の左端からスワイプでナビゲーションが開きます。

---

## セットアップ

### ブラウザで開く

https://t-aka-h.github.io/generative-art/ にアクセスするだけで動作します。

### iPhone でフルスクリーン体験

1. Safari で上記 URL を開く
2. 共有ボタン（箱から矢印のアイコン）をタップ
3. 「ホーム画面に追加」を選択
4. ホーム画面からアイコンで起動

ホーム画面から起動すると、アドレスバーやタブのない全画面表示になります。横向き（ランドスケープ）推奨。

---

## 技術構成

| 技術 | 用途 |
|------|------|
| [p5.js](https://p5js.org/) | Canvas 描画・ノイズ生成 |
| Canvas 2D API | 高速描画（ネイティブ API 直接操作） |
| Perlin Noise | 有機的なゆらぎの生成 |
| Domain Warping | オーロラ・草原・雲のカーテン状変形 |
| Smoothstep | 滑らかな閾値処理と補間 |
| Additive Blending | ネオンの光の加算合成 |
| Double Buffering | ゴースト残像のない長時間トレイル |
| HSV→RGB 変換 | 色空間変換によるネオンカラー生成 |
| Web Audio API | 環境音のリアルタイム合成 |
| DeviceOrientationEvent | 傾き・コンパス検知 |
| DeviceMotionEvent | シェイク検知 |
| Geolocation API | 緯度による色変化（Waves） |
| GitHub Pages | ホスティング |

### ファイル構成

```
generative-art/
├── index.html              ギャラリーページ（ミニプレビュー付き）
├── favicon.ico             ファビコン
├── apple-touch-icon.png    ホーム画面用アイコン
├── README.md               このファイル
├── waves/
│   ├── index.html          HTML / CSS / PWA
│   └── sketch.js           120 層の波 + Perlin ノイズ
├── aurora/
│   ├── index.html
│   └── sketch.js           ドメインワーピング × モザイク
├── meadow/
│   ├── index.html
│   └── sketch.js           深度グラデーション × 草原
├── clouds/
│   ├── index.html
│   └── sketch.js           密度場閾値処理 × 雲
├── snow/
│   ├── index.html
│   └── sketch.js           3 層パーティクル × ボケ
├── neon1/
│   ├── index.html
│   └── sketch.js           曲率物理 × ダブルバッファ残像
└── neon2/
    ├── index.html
    └── sketch.js           三角形軌道 × 全三角形描画
```

